<template>
	<lightning-spinner
		if:true={isLoading}
		alternative-text="Loading"
		size="large"
		class="slds-is-absolute"></lightning-spinner>
	<div
		if:false={isLoading}
		class="myProfile">
		<lightning-layout horizontal-align="center">
			<lightning-layout-item
				size="12"
				large-device-size="10"
				small-device-size="12">
				<lightning-layout
					horizontal-align="spread"
					multiple-rows="true">
					<lightning-layout-item
						padding={headerPadding}
						size="12"
						large-device-size="8"
						small-device-size="12">
						<div class="header-container">
							<h1 class="header">
								<span style={headerCSS}> {label.header} </span>
							</h1>
							<p class="subheader">{label.description}</p>
						</div>
					</lightning-layout-item>
					<lightning-layout-item
						padding={headerPadding}
						size="12"
						large-device-size="4"
						small-device-size="12">
						<div
							if:true={showEditBtn}
							class={floatRight}>
							<lightning-button
								label={label.editButtonLabel}
								variant="brand"
								onclick={clickEditButton}></lightning-button>
						</div>
						<div
							if:false={showEditBtn}
							class={floatRight}>
							<lightning-button
								label={label.cancelButtonLabel}
								variant="brand"
								onclick={clickCancelButton}></lightning-button>
							&nbsp;&nbsp;
							<lightning-button
								label={label.saveButtonLabel}
								variant="brand"
								onclick={clickSaveButton}></lightning-button>
						</div>
					</lightning-layout-item>
				</lightning-layout>
			</lightning-layout-item>
		</lightning-layout>
		<template
			if:true={sections}
			for:each={sections}
			for:item="section">
			<lightning-layout
				horizontal-align="center"
				key={section.header}>
				<lightning-layout-item
					size="12"
					large-device-size="10"
					small-device-size="12">
					<br />
					<div>
						<lightning-layout
							if:true={section.header}
							horizontal-align="spread"
							multiple-rows="true">
							<lightning-layout-item
								padding={headerPadding}
								size="12"
								large-device-size="10"
								small-device-size="12">
								<div class="subheader-container">
									<h1>
										<span style={subheaderCSS}> {section.header} </span>
									</h1>
									<p
										if:true={section.subHeader}
										class="subheader">
										{section.subHeader}
									</p>
								</div>
							</lightning-layout-item>
						</lightning-layout>
						<lightning-layout multiple-rows="true">
							<template
								if:true={section.fields}
								for:each={section.fields}
								for:item="field">
								<lightning-layout-item
									padding="around-medium"
									size="12"
									small-device-size="12"
									medium-device-size={field.screenSize}
									large-device-size={field.screenSize}
									key={field.fieldName}>
									<div class="slds-grid slds-grid_vertical-align-center, flex-div">
										<div class="max-width">
											<label class="slds-form-element__label, field-label">
												{field.fieldLabel}
												<template if:false={showEditBtn}>
													<template if:true={field.isRequired}>*</template>
												</template>
											</label>
											<lightning-helptext
												if:true={field.helpText}
												content={field.helpText}></lightning-helptext>
											<lightning-input
												if:true={field.isNumber}
												type="number"
												step="0.01"
												formatter={field.type}
												variant="label-hidden"
												label={field.fieldLabel}
												name={field.fieldName}
												read-only={field.isReadOnly}
												required={field.isRequired}
												disabled={field.isDisabled}></lightning-input>
											<lightning-input
												if:true={field.isCheckbox}
												type="checkbox"
												variant="label-hidden"
												label={field.fieldLabel}
												name={field.fieldName}
												read-only={field.isReadOnly}
												required={field.isRequired}
												disabled={field.isDisabled}></lightning-input>
											<lightning-input
												if:true={field.isText}
												type="text"
												variant="label-hidden"
												label={field.fieldLabel}
												name={field.fieldName}
												read-only={field.isReadOnly}
												required={field.isRequired}
												disabled={field.isDisabled}></lightning-input>
											<lightning-input
												if:true={field.isEmail}
												type={field.type}
												variant="label-hidden"
												label={field.fieldLabel}
												name={field.fieldName}
												read-only={field.isReadOnly}
												required={field.isRequired}
												disabled={field.isDisabled}></lightning-input>
											<lightning-input
												if:true={field.isPhone}
												type="tel"
												variant="label-hidden"
												label={field.fieldLabel}
												name={field.fieldName}
												read-only={field.isReadOnly}
												required={field.isRequired}
												disabled={field.isDisabled}></lightning-input>
											<lightning-input
												if:true={field.isUrl}
												type={field.type}
												variant="label-hidden"
												label={field.fieldLabel}
												name={field.fieldName}
												read-only={field.isReadOnly}
												required={field.isRequired}
												disabled={field.isDisabled}></lightning-input>
											<lightning-textarea
												if:true={field.isTextArea}
												variant="label-hidden"
												label={field.fieldLabel}
												name={field.fieldName}
												read-only={field.isReadOnly}
												required={field.isRequired}
												disabled={field.isDisabled}></lightning-textarea>
											<template if:true={field.isReadOnly}>
												<lightning-combobox
													if:true={field.isPicklist}
													variant="label-hidden"
													label={field.fieldLabel}
													placeholder="None"
													options={field.values}
													name={field.fieldName}
													read-only
													required={field.isRequired}
													disabled={field.isDisabled}></lightning-combobox>
											</template>
											<template if:false={field.isReadOnly}>
												<lightning-combobox
													if:true={field.isPicklist}
													variant="label-hidden"
													label={field.fieldLabel}
													placeholder="None"
													options={field.values}
													name={field.fieldName}
													class="editable"
													required={field.isRequired}
													disabled={field.isDisabled}></lightning-combobox>
											</template>
											<lightning-input
												if:true={field.isDate}
												type={field.type}
												date-style="short"
												variant="label-hidden"
												label={field.fieldLabel}
												name={field.fieldName}
												data-name={field.fieldName}
												read-only={field.isReadOnly}
												required={field.isRequired}
												disabled={field.isDisabled}
												pattern="[0-9]{2}-[0-9]{2}-[0-9]{4}"></lightning-input>
											<template if:true={isDesktop}>
												<lightning-dual-listbox
													if:true={field.isMultiPicklist}
													name={field.fieldName}
													read-only={field.isReadOnly}
													label={field.fieldLabel}
													source-label={label.multiSelectAvailable}
													selected-label={label.multiSelectSelected}
													options={field.values}
													variant="label-hidden"
													required={field.isRequired}
													disabled={field.isDisabled}
													size="4"
													disable-reordering
													onchange={changeMultiSelectList}>
												</lightning-dual-listbox>
											</template>
											<template if:false={isDesktop}>
												<select
													if:true={field.isMultiPicklist}
													class="slds-select multiselect"
													multiple=""
													size="4"
													name={field.fieldName}
													required={field.isRequired}
													disabled={field.isDisabled}>
													<option value="">None</option>
													<template
														if:true={field.values}
														for:each={field.values}
														for:item="pickVal">
														<option
															key={pickVal.value}
															value={pickVal.value}>
															{pickVal.label}
														</option>
													</template>
												</select>
											</template>
											<div
												if:true={field.isMultiPicklist}
												role="alert"
												class="requiredError">
												{label.requiredFieldMsg}
											</div>
										</div>
										<lightning-icon
											class="slds-float_right slds-p-around_small error"
											icon-name="utility:warning"
											size="small"
											variant="error"
											alternative-text={label.errorTitle}
											title={label.errorTitle}></lightning-icon>
										<div
											if:true={isDesktop}
											class="slds-float_right slds-p-around_small success, content-size"></div>
									</div>
								</lightning-layout-item>
							</template>
						</lightning-layout>
					</div>
				</lightning-layout-item>
			</lightning-layout>
		</template>
		<div>
			<c-lex-contact-list
				config={config}
				show-new-btn={config.showContact}
				account-id={accountId}
				account={account}
				edit-active={showEditBtn}
				is-desktop={isDesktop}
				is-mobile={isMobile}
				header-padding={headerPadding}
				float-right={floatRight}
				header-c-s-s={headerCSS}
				subheader-c-s-s={subheaderCSS}></c-lex-contact-list>
		</div>
	</div>
</template>