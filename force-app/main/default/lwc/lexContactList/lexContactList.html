<template>
	<lightning-spinner
		if:true={isLoading}
		alternative-text="Loading"
		size="large"
		class=""></lightning-spinner>
	<lightning-layout horizontal-align="center">
		<lightning-layout-item
			size="12"
			large-device-size="10"
			small-device-size="12">
			<lightning-layout
				horizontal-align="spread"
				multiple-rows="true">
				<lightning-layout-item
					padding={headerPadding}
					size="12"
					large-device-size="8"
					small-device-size="12">
					<div style="float: left">
						<h1 class="header">
							<span style={headerCSS}> {label.contactListHeader} </span>
						</h1>
						<p class="subHeader">{label.contactListSubheader}</p>
					</div>
				</lightning-layout-item>
				<lightning-layout-item
					padding={headerPadding}
					size="12"
					large-device-size="4"
					small-device-size="12">
					<div
						if:true={showNewBtn}
						class={floatRight}>
						<lightning-button
							label={label.newContactButtonLabel}
							title={label.newContactButtonLabel}
							variant="brand"
							value=""
							onclick={clickEditBtn}>
						</lightning-button>
					</div>
				</lightning-layout-item>
			</lightning-layout>
		</lightning-layout-item>
	</lightning-layout>
	<lightning-layout horizontal-align="center">
		<lightning-layout-item
			padding={headerPadding}
			if:true={noData}
			size="12"
			large-device-size="10"
			small-device-size="12">
			<p class="subHeader">{config.noContactMessage}</p>
		</lightning-layout-item>
		<lightning-layout-item
			if:false={noData}
			size="12"
			large-device-size="10"
			small-device-size="12">
			<table
				if:true={isDesktop}
				class="slds-table slds-table_cell-buffer slds-no-row-hover tableBottomMargin"
				aria-label="">
				<thead class="slds-line-height_reset">
					<tr class="slds-line-height_reset">
						<template
							for:each={columns}
							for:item="col">
							<th
								key={col.fieldName}
								scope="col">
								<h3
									class="slds-truncate"
									title={col.fieldName}>
									{col.label}
								</h3>
							</th>
						</template>
					</tr>
				</thead>
				<tbody>
					<template
						for:each={rows}
						for:item="row">
						<tr
							key={row.Id}
							class="slds-hint-parent">
							<template
								for:each={row.con}
								for:item="con">
								<td
									key={con.label}
									data-label={con.label}
									scope="row">
									<lightning-formatted-text
										if:true={con.fieldInfo.isText}
										class="tableData"
										value={con.value}></lightning-formatted-text>
									<lightning-formatted-email
										if:true={con.fieldInfo.isEmail}
										class="tableData"
										value={con.value}></lightning-formatted-email>
									<lightning-formatted-date-time
										if:true={con.fieldInfo.isDate}
										class="tableData"
										value={con.value}
										year="numeric"
										month="numeric"
										day="numeric"></lightning-formatted-date-time>
									<lightning-formatted-date-time
										if:true={con.fieldInfo.isDateTime}
										class="tableData"
										value={con.value}
										year="numeric"
										month="numeric"
										day="numeric"
										hour="2-digit"
										minute="2-digit"
										time-zone-name="short"></lightning-formatted-date-time>
									<lightning-input
										if:true={con.fieldInfo.isCheckbox}
										class="tableData"
										checked={con.checked}
										type={con.fieldInfo.type}
										variant="label-hidden"
										disabled="true"
										label={con.name}
										name={con.label}></lightning-input>
									<lightning-formatted-number
										if:true={con.fieldInfo.isNumber}
										class="tableData"
										value={con.value}></lightning-formatted-number>
									<lightning-formatted-number
										if:true={con.fieldInfo.isCurrency}
										class="tableData"
										value={con.value}
										format-style="currency"
										currency-code="USD"></lightning-formatted-number>
									<lightning-formatted-number
										if:true={con.fieldInfo.isPercent}
										class="tableData"
										value={con.value}
										format-style="percent"
										maximum-fraction-digits="2"></lightning-formatted-number>
									<lightning-formatted-phone
										if:true={con.fieldInfo.isPhone}
										class="tableData"
										value={con.value}></lightning-formatted-phone>
									<lightning-formatted-text
										if:true={con.fieldInfo.isTextarea}
										class="tableData"
										value={con.value}></lightning-formatted-text>
									<lightning-formatted-text
										if:true={con.fieldInfo.isPicklist}
										class="tableData"
										value={con.value}></lightning-formatted-text>
									<lightning-formatted-text
										if:true={con.fieldInfo.isMultiPicklist}
										class="tableData"
										value={con.value}></lightning-formatted-text>
									<lightning-formatted-text
										if:true={con.fieldInfo.isReference}
										class="tableData"
										value={con.value}></lightning-formatted-text>
									<lightning-formatted-url
										if:true={con.fieldInfo.isUrl}
										class="tableData"
										value={con.value}
										target={con.value}></lightning-formatted-url>
								</td>
							</template>
							<td
								class={editBtnClass}
								role="gridcell"
								align="right">
								<!-- <div if:false={editActive} class="editButton"> -->
								<lightning-button
									label={label.editContactBtn}
									title="More actions"
									value={row.Id}
									variant="brand"
									onclick={clickEditBtn}>
								</lightning-button>
								<!-- <lightning-button
                                        label={label.deleteContactBtn}
                                        title="More actions"
                                        value={row.Id}
                                        onclick={clickDeleteBtn}>
                                    </lightning-button> -->
								<!-- </div> -->
							</td>
						</tr>
					</template>
				</tbody>
			</table>
			<div if:true={isMobile}>
				<template
					for:each={rows}
					for:item="row">
					<div
						key={row.Id}
						class="mobileCard">
						<lightning-card>
							<!-- <div
								class="editButton"
								slot="actions">
								<lightning-button
									label="Edit"
									title="More actions"
									value={row.Id}
									variant="brand"
									onclick={clickEditBtn}>
								</lightning-button>
							</div> -->
							<lightning-layout
								horizontal-align="spread"
								multiple-rows="true">
								<template
									for:each={row.con}
									for:item="con">
									<lightning-layout-item
										key={con.label}
										padding="around-small"
										size="12">
										<h3>{con.name}</h3>
										<lightning-formatted-text
											if:true={con.fieldInfo.isText}
											class="tableData"
											value={con.value}></lightning-formatted-text>
										<lightning-formatted-email
											if:true={con.fieldInfo.isEmail}
											class="tableData"
											value={con.value}></lightning-formatted-email>
										<lightning-formatted-date-time
											if:true={con.fieldInfo.isDate}
											class="tableData"
											value={con.value}
											year="numeric"
											month="numeric"
											day="numeric"></lightning-formatted-date-time>
										<lightning-formatted-date-time
											if:true={con.fieldInfo.isDateTime}
											class="tableData"
											value={con.value}
											year="numeric"
											month="numeric"
											day="numeric"
											hour="2-digit"
											minute="2-digit"
											time-zone-name="short"></lightning-formatted-date-time>
										<lightning-input
											if:true={con.fieldInfo.isCheckbox}
											class="tableData"
											value={con.value}
											checked={con.value}
											type={con.fieldInfo.type}
											variant="label-hidden"
											disabled="true"
											label={con.name}
											name={con.label}></lightning-input>
										<lightning-formatted-number
											if:true={con.fieldInfo.isNumber}
											class="tableData"
											value={con.value}></lightning-formatted-number>
										<lightning-formatted-number
											if:true={con.fieldInfo.isCurrency}
											class="tableData"
											value={con.value}
											format-style="currency"
											currency-code="USD"></lightning-formatted-number>
										<lightning-formatted-number
											if:true={con.fieldInfo.isPercent}
											class="tableData"
											value={con.value}
											format-style="percent"
											maximum-fraction-digits="2"></lightning-formatted-number>
										<lightning-formatted-phone
											if:true={con.fieldInfo.isPhone}
											class="tableData"
											value={con.value}></lightning-formatted-phone>
										<lightning-formatted-text
											if:true={con.fieldInfo.isTextarea}
											class="tableData"
											value={con.value}></lightning-formatted-text>
										<lightning-formatted-text
											if:true={con.fieldInfo.isPicklist}
											class="tableData"
											value={con.value}></lightning-formatted-text>
										<lightning-formatted-text
											if:true={con.fieldInfo.isMultiPicklist}
											class="tableData"
											value={con.value}></lightning-formatted-text>
										<lightning-formatted-text
											if:true={con.fieldInfo.isReference}
											class="tableData"
											value={con.value}></lightning-formatted-text>
										<lightning-formatted-url
											if:true={con.fieldInfo.isUrl}
											class="tableData"
											value={con.value}
											target={con.value}></lightning-formatted-url>
									</lightning-layout-item>
								</template>
								<lightning-layout-item
									size="12"
									padding="around-small"
									style="display: flex">
									<lightning-button
										label="Edit"
										title="More actions"
										value={row.Id}
										variant="brand"
										style="flex: 1"
										onclick={clickEditBtn}>
									</lightning-button>
								</lightning-layout-item>
							</lightning-layout>
						</lightning-card>
					</div>
				</template>
			</div>
		</lightning-layout-item>
	</lightning-layout>
</template>